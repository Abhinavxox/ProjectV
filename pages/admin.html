<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../global.style.css" />
    <title>Signup</title>
  </head>
  <body onload="fetchUsers()">
    <header>
      <h1 align="center">Welcome to Pre-paid Energy System</h1>
    </header>
    <ul class="navbar">
      <li id="datetime"></li>
    </ul>
    <br />
    <br />
    <br />
    <div class="upperContainer">
      <h1 class="title">Admin Dashboard</h1>
      <br />
      <div>
        <table>
          <thead>
            <tr>
              <th>Id</th>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Password</th>
              <th>Contact Number</th>
              <th>Province</th>
              <th>City</th>
              <th>Street Number</th>
              <th>Email</th>
              <th>Amount</th>
            </tr>
          </thead>
          <tbody id="users"></tbody>
        </table>
      </div>
    </div>
  </body>
  <script>
    function fetchUsers() {
      fetch("https://projectv-h3e2.onrender.com/fetchAllUsers")
        .then((res) => res.json())
        .then((data) => {
          console.log(data);
          const users = data.users.map(
            (user) => `
            <tr>
              <td>${user.id}</td>
              <td>${user.firstname}</td>
              <td>${user.lastname}</td>
              <td>${user.password}</td>
              <td>${user.contactnumber}</td>
              <td>${user.province}</td>
              <td>${user.city}</td>
              <td>${user.streetnumber}</td>
              <td>${user.email}</td>
              <td>${user.amount}</td>
            </tr>
          `
          );
          document.getElementById("users").innerHTML = users.join("");
        });
    }
  </script>
  <script src="../timestamp.js"></script>
</html>
